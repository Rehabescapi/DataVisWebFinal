<!DOCTYPE html>
<meta charset="utf-8">

<!-- Load d3.js -->

<html>
  <head>
    <style>
      svg {
        border-style: dashed;
      }
    </style>
    <script src="https://d3js.org/d3.v5.min.js"></script> 
    <script src="https://d3js.org/topojson.v1.min.js"></script>
    <script src="https://unpkg.com/topojson@3"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/2.25.6/d3-legend.min.js"></script>
    <script src="style.css"></script>
    <script src="helper.js"></script>
    <script src="ChoroplethMain.js"></script>
    <script src="Waffle.js"></script>
    
    
    <title>Geography</title>
   

</head>
<body>
  <h1> Hello World</h1>
  <button onclick="setYear(0)">No Data</button>
  <button onclick="setYear(1)"> School Population</button>
  <button onclick="setYear(2)"> 3rdOption</button>
  <div id ="Graphs">
    <svg id="my_dataviz"></svg>
    <svg id="main_Legend"></svg>
   
    <svg id="SubGraphA" width =400 , height =300 >
      
    </svg>
    <svg id="SubGraphB" width = 200, height = 300 >

    </svg>
  </div>

    <script>


// The svg
      var width =600;
      var height = 1000;
    const svg = d3.select("svg").attr("width", width).attr("height", height);
    const subGraphA = d3.select("#SubGraphA")
   
  /*
  Moved projection to ChoroplethMain. 
  */

  /***
   * TODO selet PoI from Main map to expand on subGraphs. 
   * */
  function getSchoolIDData(node, ID){

  }

   //*Data Visualization Boards
   CP = ChoroplethVis();
  WF = WaffleVis();

   CP.drawChloropleth(svg);

   CP.dispatch.on("selected",
   function(selectedPath){
    console.log(selectedPath);
    

    d3.json(`/SchoolID/?ID=${selectedPath}`).then(function( data){
      
      console.log(data);
      WF.drawWaffle(subGraphA)

      

    })

    /***
     * TODO ADD ZOOM IN on Selected Area
     * 
     */

   })

   /***
    * TODO return to global scope
    */

   

   function setYear(mode){
    
    CP.drawChloropleth(svg,mode);


   }
   
    </script>
</body>
</html>
